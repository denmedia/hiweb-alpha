jQuery(document).ready(function(b){var a={$images_on_page:[],images_queue:[],images_done:[],images_error:[],scroll_event_interval:200,scroll_event_handler:null,scroll_event_now:!1,init:function(){a.make_events();a.find_images_on_page();a.find_images_on_windows()},make_events:function(){b(window).scroll(function(d){a.scroll_event_now||(a.scroll_event_now=!0,clearTimeout(a.scroll_event_handler),a.scroll_event_handler=setTimeout(function(){a.find_images_on_windows();a.scroll_event_now=!1},a.scroll_event_interval))})},
find_images_on_page:function(){a.$images_on_page=[];b("img[data-src-defer]").each(function(){a.$images_on_page.push(b(this));a.set_image_aspect(b(this))})},find_images_on_windows:function(){var d=b(window).scrollTop()+window.innerHeight,e;for(e in a.$images_on_page){var c=a.$images_on_page[e];c.offset().top<d+c.height()+100&&(a.images_queue.push(a.$images_on_page[e]),a.load_image(a.$images_on_page[e]),delete a.$images_on_page[e])}},load_image:function(a){a.addClass("hiweb-theme-imagesDefer-image");
var d=new Image;d.onload=function(){a.attr("src",a.attr("data-src-defer"));a.removeAttr("data-src-defer");a.attr("srcset",a.attr("data-srcset-defer"));a.removeAttr("data-srcset-defer");a.css("width","").css("height","");a.removeClass("hiweb-theme-imagesDefer-image")};d.src=a.attr("data-src-defer")},set_image_aspect:function(a){if("absolute"!==a.css("position")){var b=a.width()/a.height(),c=parseFloat(a.attr("data-aspect"));c>b?a.height(a.width()/c):a.width(a.height()*c)}}};a.init();b(document).on("ajaxComplete",
a.find_images_on_page);b(document).on("ajaxComplete",a.find_images_on_windows)});
