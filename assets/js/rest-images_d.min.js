jQuery(document).ready(function(d){var a={$images_on_page:[],images_queue:[],images_done:[],images_error:[],scroll_event_interval:200,scroll_event_handler:null,scroll_event_now:!1,init:function(){a.make_events();a.find_images_on_page();a.find_images_on_windows()},make_events:function(){d(window).scroll(function(b){a.scroll_event_now||(a.scroll_event_now=!0,clearTimeout(a.scroll_event_handler),a.scroll_event_handler=setTimeout(function(){a.find_images_on_windows();a.scroll_event_now=!1},a.scroll_event_interval))})},
find_images_on_page:function(){d("img[data-src-defer]").each(function(){a.$images_on_page.push(d(this));a.set_image_aspect(d(this))})},find_images_on_windows:function(){var b=d(window).scrollTop()+window.innerHeight,e;for(e in a.$images_on_page){var c=a.$images_on_page[e];c.offset().top<b+c.height()+100&&(a.images_queue.push(a.$images_on_page[e]),a.load_image(a.$images_on_page[e]),delete a.$images_on_page[e])}},load_image:function(b){b.addClass("hiweb-theme-imagesDefer-image");var a=new Image;a.onload=
function(){b.attr("src",b.attr("data-src-defer"));b.removeAttr("data-src-defer");b.attr("srcset",b.attr("data-srcset-defer"));b.removeAttr("data-srcset-defer");b.css("width","").css("height","");b.removeClass("hiweb-theme-imagesDefer-image")};a.src=b.attr("data-src-defer")},set_image_aspect:function(a){if("absolute"!==a.css("position")){var b=a.width()/a.height(),c=parseFloat(a.attr("data-aspect"));c>b?a.height(a.width()/c):a.width(a.height()*c)}}};a.init()});
